import{q as l,A as c,l as o,p as d}from"./index.4addc2f7.js";import{d as y}from"./MealPlansService.b279afb4.js";class S{async getDayShopList(s){const a=await l.get(`api/days/${s}/shoppinglist`);c.shoppingList=a.data,o.log("[SHOPPING LIST from backend]",a)}async getMealPlanShopList(s){const a=await l.get(`api/mealplans/${s}/shoppinglist`);c.shoppingList=a.data,o.log("shopping list")}async generateShoppingListByDayId(s){const a=[],e=await d.getPlannedMealsByDayId(s);for(let i=0;i<e.data.plannedMeals.length;i++){const n=e.data.plannedMeals[i];for(let p=0;p<n.recipe.ingredients.length;p++){let t=n.recipe.ingredients[p];t.measure=="<unit>"&&(t.measure=null),a.push(t)}}await this.postDayShopList(s,a)}async generateShoppingListByMealPlanId(s){const a=[],e=[];await y.getDays(s);let i=c.activeDays;for(let n=0;n<i.length;n++){let p=await d.getPlannedMealsByDayId(i[n].id);a.push(...p.data.plannedMeals);for(let t=0;t<a.length;t++){const h=a[t];for(let g=0;g<h.recipe.ingredients.length;g++){let r=h.recipe.ingredients[g];r.measure=="<unit>"&&(r.measure=null),e.push(r)}}}await this.postMealPlanShopList(s,e)}async postDayShopList(s,a){console.log(a);const e=await l.post(`api/days/${s}/shoppinglist`,a);o.log(e.data)}async postMealPlanShopList(s,a){console.log(a);const e=await l.post(`api/mealplans/${s}/shoppinglist`,a);o.log(e.data)}async checkIngredient(s,a){await l.put(`api/days/${s}/shoppinglist/${a}`,a)}}const w=new S;export{w as s};
