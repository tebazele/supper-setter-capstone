import{_ as L,r as x,y as C,u as I,z as R,b as B,B as q,P as l,l as r,d as b,p as P,C as A,s as V,M as j,c as i,f as a,t as u,x as N,F as g,h as w,i as Y,j as T,v as E,o as d,D as y,g as F,A as m,m as G,n as z,k as O}from"./index.4addc2f7.js";import{d as f,m as D}from"./MealPlansService.b279afb4.js";import{s as S}from"./ShoppingListService.c7ef3396.js";const U={setup(){const o=x(""),n=C({query:""}),h=I();R(()=>{m.activeDays&&v(m.activeDays)}),B(()=>{M(),_()});const s=q();async function v(e){try{await P.getPlannedMeals(e)}catch(t){l.error(t.message),r.log(t)}}async function M(){try{await f.getDays(s.params.mealPlanId)}catch(e){l.error(e.message),r.log(e)}}async function _(){try{await D.getMealPlanById(s.params.mealPlanId)}catch(e){r.log(e),l.error(e.message)}}return{filterBy:o,search:n,mealPlan:b(()=>m.activeMealPlan),days:b(()=>m.activeDays),plannedMealsByDay:b(()=>m.plannedMeals),myRecipes:b(()=>m.myRecipes),nonArchivedMyRecipes:b(()=>{let e=m.myRecipes.filter(t=>t.archived==!1);return o.value==""?e:(r.log(o.value),e.filter(t=>t.mealType[0]==o.value))}),async createDay(){try{await f.createDay(s.params.mealPlanId)}catch(e){r.error(e),l.error(e.message)}},async createPlannedMeal(e){try{r.log(e),await P.createPlannedMeal(e),A.getOrCreateInstance("#exampleModal").hide(),o.value="",n.query=""}catch(t){r.log(t),l.error(t.message)}},async createDayShoppingList(e){await S.generateShoppingListByDayId(e),h.push({name:"ShoppingList",query:{day:`${e}`}})},async createMealPlanShoppingList(e){await S.generateShoppingListByMealPlanId(e),h.push({name:"ShoppingList",query:{mealplan:`${e}`}})},async pushDayShoppingList(e){h.push({name:"ShoppingList",query:{day:`${e}`}})},async pushMealPlanShoppingList(e){h.push({name:"ShoppingList",query:{mealplan:`${e}`}})},async deleteMealPlan(){try{await l.confirm("Are you sure you want to delete this meal plan?","You can't go back")&&(await D.deleteMealPlan(s.params.mealPlanId),h.push({name:"Account"}))}catch(e){r.log(e),l.error(e.message)}},async deleteDay(e){try{await l.confirm("Are you sure you want to delete this day?","")&&await f.deleteDay(e)}catch(t){r.log(t),l.error(t.message)}},async searchMyRecipes(){try{o.value="",await V.searchMyRecipes(n.query),n.query=""}catch(e){r.log(e),l.error(e.message)}}}},components:{MealPlan:j}},c=o=>(G("data-v-e9b22d2f"),o=o(),z(),o),H={class:"container-fluid serif-pro"},J={class:"d-flex my-2 justify-content-between"},K={key:0,class:"mt-1 raleway d-flex justify-content-between"},Q={class:"row"},W={class:"d-flex justify-content-between"},X={class:"raleway"},Z=["onClick"],$=["onClick"],ee=y("View Day "),ae=c(()=>a("i",{class:"mdi mdi-cart"},null,-1)),te=["onClick"],se=c(()=>a("i",{class:"mdi mdi-cart"},null,-1)),ne=y(" List from Day"),oe=[se,ne],le={class:"text-end"},re={class:"text-end d-flex justify-content-between"},ie=c(()=>a("i",{class:"mdi mdi-delete"},null,-1)),de=y("Delete Plan"),ce=[ie,de],ye=y("View MealPlan "),me=c(()=>a("i",{class:"mdi mdi-cart"},null,-1)),he=y(" List"),pe=[ye,me,he],be=c(()=>a("i",{class:"mdi mdi-cart"},null,-1)),ue=y(" List from Mealplan"),_e=[be,ue],ge={class:"modal fade serif-pro",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},fe={class:"modal-dialog"},ve={class:"modal-content"},Me=c(()=>a("div",{class:"modal-header"},[a("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Your Recipes"),a("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),ke={class:"modal-body"},Pe=c(()=>a("button",{class:"rounded-end bg-primary btn-info mdi mdi-magnify"},null,-1)),we=c(()=>a("h4",{class:"raleway"},"Sort Your Recipes",-1)),De={class:"d-flex"},Se=["onClick"],Le={class:"roboto-slab"},xe=["src"],Ce=c(()=>a("div",{class:"modal-footer"},[a("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1));function Ie(o,n,h,s,v,M){var e;const _=O("MealPlan");return d(),i(g,null,[a("div",H,[a("div",J,[s.mealPlan?(d(),i("h2",K,u(s.mealPlan.name),1)):N("",!0)]),a("section",Q,[(d(!0),i(g,null,w(s.plannedMealsByDay,(t,p)=>(d(),i("div",{class:"col-12",key:p},[a("div",W,[a("h5",X,[y("Day "+u(p+1)+" ",1),a("span",{onClick:k=>s.deleteDay(t.dayId),class:"mdi mdi-delete text-danger"},null,8,Z)]),s.days[p].shopListGenerated?(d(),i("button",{key:0,onClick:k=>s.pushDayShoppingList(t.dayId),class:"btn bg-primary border border-dark border-1"},[ee,ae,y(" List "+u(p+1),1)],8,$)):(d(),i("button",{key:1,onClick:k=>s.createDayShoppingList(t.dayId),class:"btn bg-primary border border-dark border-1"},oe,8,te))]),F(_,{plannedMealsArray:t.plannedMeals,dayId:t.dayId},null,8,["plannedMealsArray","dayId"])]))),128))]),a("div",le,[a("div",re,[a("button",{onClick:n[0]||(n[0]=t=>s.deleteMealPlan()),class:"btn border border-dark bg-danger text-white selectable mb-2"},ce),(e=s.mealPlan)!=null&&e.shopListGenerated?(d(),i("button",{key:0,onClick:n[1]||(n[1]=t=>s.pushMealPlanShoppingList(s.mealPlan.id)),class:"btn bg-primary border border-dark border-1 mb-2"},pe)):(d(),i("button",{key:1,onClick:n[2]||(n[2]=t=>s.createMealPlanShoppingList(s.mealPlan.id)),class:"btn bg-primary border border-dark border-1 mb-2"},_e)),a("button",{class:"btn bg-secondary text-white border border-dark me-2 mb-2",onClick:n[3]||(n[3]=(...t)=>s.createDay&&s.createDay(...t))},"Add Day")])])]),a("div",ge,[a("div",fe,[a("div",ve,[Me,a("div",ke,[a("form",{onSubmit:n[5]||(n[5]=Y(t=>s.searchMyRecipes(),["prevent"])),class:"my-2 text-end"},[T(a("input",{class:"rounded-start",type:"text","onUpdate:modelValue":n[4]||(n[4]=t=>s.search.query=t),placeholder:"Search Your Recipes"},null,512),[[E,s.search.query]]),Pe],32),we,a("div",De,[a("button",{onClick:n[6]||(n[6]=t=>{s.filterBy="breakfast",s.search.query=""}),class:"same-width btn btn-outline-dark me-1"},"Breakfast"),a("button",{onClick:n[7]||(n[7]=t=>{s.filterBy="lunch/dinner",s.search.query=""}),class:"same-width btn btn-outline-dark me-1"},"Lunch/ Dinner"),a("button",{onClick:n[8]||(n[8]=()=>{s.search.query="",s.searchMyRecipes()}),class:"same-width btn btn-outline-dark"},"All")]),(d(!0),i(g,null,w(s.nonArchivedMyRecipes,t=>(d(),i("section",{class:"row",key:t.edamamId},[a("div",{onClick:p=>s.createPlannedMeal(t.id),class:"selectable ms-3 mt-2 col-11 d-flex justify-content-between align-items-baseline m-1 bg-grey"},[a("p",Le,u(t.label),1),a("img",{src:t.image,alt:"food",class:"thumbnail selectable"},null,8,xe)],8,Se)]))),128))]),Ce])])])],64)}const Ae=L(U,[["render",Ie],["__scopeId","data-v-e9b22d2f"]]);export{Ae as default};
